{% extends "base.html" %}
{% block title %}Blindspots â€“ Study Map{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Blindspots</h1>
    <p>AI-identified gaps in your knowledge and suggested areas to explore next.</p>
</div>

{% if total == 0 %}
<div class="empty-state">
    <div class="empty-state-icon">&#128065;</div>
    <h3>No blindspots detected yet</h3>
    <p>Log some entries and the AI will surface knowledge gaps.</p>
</div>
{% else %}

<div class="stat-grid cols-2">
    <div class="stat-card"><div class="number">{{ total }}</div><div class="label">Total Blindspots</div></div>
    <div class="stat-card"><div class="number">{{ categories|length }}</div><div class="label">Categories</div></div>
</div>

<hr class="divider">

{% for cat, items in categories.items() %}
<div class="category-section">
    <span class="tag tag-rose">{{ cat }}</span>

    {% for bs in items %}
    <div class="blindspot-card">
        <div class="blindspot-header">
            <div>
                <div class="blindspot-text">{{ bs.suggestion }}</div>
                <div class="blindspot-meta">From: {{ bs.topic_title }}</div>
            </div>
            <div class="entry-date">{{ bs.created_at[:10] if bs.created_at else '' }}</div>
        </div>
        {% if bs.why_important %}
        <div class="blindspot-motivation">
            <div class="blindspot-section-label">Why it matters</div>
            <p class="blindspot-detail">{{ bs.why_important }}</p>
        </div>
        {% endif %}
        {% if bs.how_it_helps %}
        <div class="blindspot-motivation">
            <div class="blindspot-section-label">How it helps you</div>
            <p class="blindspot-detail">{{ bs.how_it_helps }}</p>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endfor %}
{% endif %}
{% endblock %}
